<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cassette Review Card</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;900&display=swap" rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --bg: #000;
            --panel: #141414;
            --text: #fff;
            --accent: #2962FF;
            --border: #333;
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }

        .app-container { display: flex; height: 100%; }

        /* --- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø --- */
        .controls {
            width: 340px; background: var(--panel); padding: 20px;
            border-right: 1px solid var(--border); overflow-y: auto;
            flex-shrink: 0; z-index: 10;
        }
        h1 { font-size: 18px; color: var(--text); margin: 0 0 20px 0; }
        .input-block { margin-bottom: 15px; }
        .input-block label { display: block; font-size: 12px; color: #888; margin-bottom: 5px; }
        input[type="text"], textarea { 
            width: 100%; background: #000; border: 1px solid #444; color: #fff; 
            padding: 8px; border-radius: 6px; resize: none; font-family: inherit; 
        }
        input[type="file"] { font-size: 12px; }
        .divider { 
            font-size: 10px; text-transform: uppercase; color: #666; font-weight: bold; 
            border-bottom: 1px solid #333; margin: 20px 0 10px 0; padding-bottom: 5px;
        }
        .slider-row { display: flex; align-items: center; font-size: 13px; font-weight: 600; margin-bottom: 8px; }
        .slider-row span { width: 70px; }
        .slider-row .val { width: 30px; text-align: right; color: var(--accent); }

        input[type="range"] { 
            flex-grow: 1; margin: 0 10px; height: 6px; 
            background: #333; border-radius: 3px; 
            -webkit-appearance: none; cursor: pointer; box-shadow: none; 
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 18px; height: 18px; 
            background: #fff; border-radius: 50%; box-shadow: none;
        }
        .rainbow-slider {
            background: linear-gradient(90deg, #FF0000 0%, #FF7F00 16%, #FFFF00 33%, #00FF00 50%, #00FFFF 66%, #0000FF 83%, #8B00FF 100%) !important;
        }
        .vibe-desc { text-align: right; font-size: 11px; color: #888; margin-top: -5px; }

        #btn-save {
            width: 100%; background: var(--accent); color: #fff; border: none; padding: 15px;
            border-radius: 8px; font-weight: bold; font-size: 16px; margin-top: 20px; cursor: pointer;
        }

        /* --- –ü–†–ï–í–¨–Æ –û–ë–õ–ê–°–¢–¨ --- */
        .preview-wrapper {
            flex-grow: 1; background: #050505; 
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; position: relative;
            background-image: radial-gradient(#222 1px, transparent 1px);
            background-size: 20px 20px;
        }
        #card-scale-root {
            transform-origin: center center;
            box-shadow: 0 0 50px rgba(0,0,0,0.5); 
        }

        /* --- –°–ê–ú–ê –ö–ê–†–¢–û–ß–ö–ê --- */
        .card-hd {
            width: 1080px; height: 1080px; 
            background: #000;
            position: relative; overflow: hidden; display: flex; flex-direction: column;
        }

        /* 1. –§–û–ù–û–í–´–ô –°–õ–û–ô (DIV –≤–º–µ—Å—Ç–æ IMG) */
        .bg-layer { 
            position: absolute; inset: 0; z-index: 1;
            background-color: #111;
            /* –í–ê–ñ–ù–û: cover –æ–±—Ä–µ–∑–∞–µ—Ç –ª–∏—à–Ω–µ–µ, –∞ –Ω–µ —Å–∂–∏–º–∞–µ—Ç */
            background-size: cover; 
            background-position: center;
            background-repeat: no-repeat;
            
            /* –ë–õ–Æ–† –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ (Android/PC) */
            filter: blur(40px);
            transform: scale(1.1);
        }

        /* 2. –ï–°–õ–ò iOS - –í–´–ö–õ–Æ–ß–ê–ï–ú –ë–õ–Æ–† (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø–∏–∫—Å–µ–ª–µ–π) */
        body.is-ios .bg-layer {
            filter: none !important;
            transform: none !important;
            opacity: 0.3; /* –ü—Ä–æ—Å—Ç–æ –∑–∞—Ç–µ–º–Ω—è–µ–º */
        }

        .bg-overlay {
            position: absolute; inset: 0; z-index: 2;
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.85));
        }
        /* –ù–∞ iOS –æ–≤–µ—Ä–ª–µ–π —á—É—Ç—å —Ç–µ–º–Ω–µ–µ, —Ç.–∫. —Ñ–æ–Ω —á–µ—Ç–∫–∏–π */
        body.is-ios .bg-overlay {
            background: linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(0,0,0,0.95));
        }

        .card-inner { position: relative; z-index: 5; height: 100%; padding: 60px; display: flex; flex-direction: column; }

        .top-part { display: flex; gap: 40px; height: 500px; }
        .poster-box { 
            width: 340px; height: 100%; border-radius: 20px; overflow: hidden; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.8); 
            border: 2px solid rgba(255,255,255,0.1); flex-shrink: 0;
            background: #111;
        }

        /* –ü–û–°–¢–ï–† (DIV –≤–º–µ—Å—Ç–æ IMG) */
        #card-poster-div {
            width: 100%; height: 100%;
            background-color: #222;
            background-size: cover; 
            background-position: center;
            background-repeat: no-repeat;
            background-image: url('https://via.placeholder.com/400x600/333/555?text=POSTER');
        }

        .info-box { flex-grow: 1; display: flex; flex-direction: column; }
        .title-wrap { height: 180px; overflow: hidden; margin-bottom: 20px; }
        .title-wrap h2 { 
            margin: 0; font-size: 54px; line-height: 1.1; font-weight: 800; 
            text-shadow: 0 4px 10px rgba(0,0,0,0.8);
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
        }

        .stats-list { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
        .stat { display: flex; align-items: center; gap: 20px; }
        .l { width: 110px; font-size: 26px; font-weight: 700; color: #ccc; text-shadow: 1px 1px 2px #000;}
        .b { flex-grow: 1; height: 14px; background: rgba(0,0,0,0.6); border-radius: 7px; border: 1px solid rgba(255,255,255,0.15); }
        .b div { height: 100%; background: #fff; border-radius: 7px; box-shadow: none; }
        .v { width: 60px; text-align: right; font-size: 30px; font-weight: 800; text-shadow: 1px 1px 2px #000;}

        .vibe-block {
            margin-top: auto; background: rgba(0,0,0,0.6); padding: 15px 25px; 
            border-radius: 15px; border: 1px solid rgba(255,255,255,0.2);
            display: flex; justify-content: space-between; align-items: center;
        }
        .vt { font-size: 22px; font-weight: 700; color: #ddd; }
        .vv { font-size: 30px; font-weight: 900; }

        .mid-part { flex-grow: 1; display: flex; align-items: center; justify-content: center; }
        .mid-part p { 
            font-size: 26px; font-style: italic; text-align: center; color: #fff; 
            margin: 0; line-height: 1.4; max-height: 160px;
            overflow: hidden; text-shadow: 0 2px 10px rgba(0,0,0,1); padding: 0 20px;
        }

        .bot-part { margin-top: auto; }
        .brand { text-align: right; font-size: 22px; font-weight: 700; color: rgba(255,255,255,0.7); text-transform: uppercase; margin-bottom: 15px; }

        .footer {
            height: 180px; background: #333;
            border-radius: 25px; display: flex; justify-content: space-between; align-items: center; 
            padding: 0 50px; color: #fff; box-shadow: none; border: none;
        }

        .fl-label { font-size: 20px; font-weight: 800; opacity: 0.8; letter-spacing: 2px; }
        .fl-rank { font-size: 46px; font-weight: 900; text-transform: uppercase; }
        .f-score { font-size: 110px; font-weight: 900; line-height: 1; letter-spacing: -5px; }

        /* –¶–í–ï–¢–ê –†–ê–ù–ì–û–í (–°–ø–ª–æ—à–Ω—ã–µ) */
        .r-0 { background: #262626; color: #888; }
        .r-1 { background: #333333; color: #aaa; }
        .r-2 { background: #3E2723; color: #E7B9B3; }
        .r-3 { background: #B71C1C; color: #fff; }
        .r-4 { background: #E65100; color: #fff; }
        .r-5 { background: #FF9800; color: #000; }
        .r-5 .fl-label { opacity: 0.6; color: #000; }
        .r-6 { background: #CDDC39; color: #000; }
        .r-6 .fl-label { opacity: 0.6; color: #000; }
        .r-7 { background: #4CAF50; color: #000; }
        .r-7 .fl-label { opacity: 0.6; color: #000; }
        .r-8 { background: #2E7D32; color: #fff; }
        .r-9 { background: #00E5FF; color: #000; }
        .r-9 .fl-label { opacity: 0.6; color: #000; }
        .r-10 { background: #2962FF; color: #fff; }

        @media (max-width: 900px) {
            .app-container { flex-direction: column; overflow: auto; }
            .controls { width: 100%; border-right: none; border-bottom: 1px solid #333; height: auto; padding-bottom: 40px; }
            .preview-wrapper { min-height: 400px; padding: 20px; }
        }
    </style>
</head>
<body>

<div class="app-container">
    
    <div class="controls">
        <h1>–°–æ–∑–¥–∞–π —Å–≤–æ—é —Ä–µ–≤—å—é-–∫–∞—Ä—Ç–æ—á–∫—É!</h1>
        
        <div class="input-block">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input type="text" id="inp-title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Arcane" maxlength="50">
        </div>

        <div class="input-block">
            <label>–û—Ç–∑—ã–≤ (–º–∞–∫—Å 140 —Å–∏–º–≤.)</label>
            <textarea id="inp-comment" rows="3" maxlength="140" placeholder="–í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è..."></textarea>
        </div>
            
        <div class="input-block">
            <label>–ü–æ—Å—Ç–µ—Ä/–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
            <input type="file" id="inp-img" accept="image/*">
        </div>

        <div class="divider">–û—Ü–µ–Ω–∫–∏</div>
        
        <div class="slider-row"><span>üìú –°—é–∂–µ—Ç</span> <input type="range" id="rng-plot" max="10" step="0.5" value="5"> <span class="val" id="val-plot">5</span></div>
        <div class="slider-row"><span>üé≠ –ì–µ—Ä–æ–∏</span> <input type="range" id="rng-chars" max="10" step="0.5" value="5"> <span class="val" id="val-chars">5</span></div>
        <div class="slider-row"><span>üé® –í–∏–∑—É–∞–ª</span> <input type="range" id="rng-visual" max="10" step="0.5" value="5"> <span class="val" id="val-visual">5</span></div>
        <div class="slider-row"><span>üîä –ó–≤—É–∫</span> <input type="range" id="rng-sound" max="10" step="0.5" value="5"> <span class="val" id="val-sound">5</span></div>

        <div class="divider">–õ–∏—á–Ω–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ (–º–Ω–æ–∂–∏—Ç–µ–ª—å)</div>
        <div class="slider-row">
            <span>‚ù§Ô∏è –í–∞–π–±</span> 
            <input type="range" id="rng-vibe" class="rainbow-slider" min="1" max="10" step="1" value="5"> 
            <span class="val" id="val-vibe">5</span>
        </div>
        <div class="vibe-desc" id="lbl-vibe">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ (x1.0)</div>

        <button id="btn-save">–°–∫–∞—á–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
    </div>

    <div class="preview-wrapper" id="preview-container">
        <div id="card-scale-root">
            
            <div id="target-card" class="card-hd">
                
                <div class="bg-layer" id="bg-div"></div>
                
                <div class="bg-overlay"></div>

                <div class="card-inner">
                    <div class="top-part">
                        <div class="poster-box">
                            <div id="card-poster-div"></div>
                        </div>
                        <div class="info-box">
                            <div class="title-wrap"><h2 id="out-title">–ù–∞–∑–≤–∞–Ω–∏–µ</h2></div>
                            
                            <div class="stats-list">
                                <div class="stat"><span class="l">–°—é–∂–µ—Ç</span><div class="b"><div id="bar-plot" style="width:50%"></div></div><span class="v" id="out-plot">5</span></div>
                                <div class="stat"><span class="l">–ì–µ—Ä–æ–∏</span><div class="b"><div id="bar-chars" style="width:50%"></div></div><span class="v" id="out-chars">5</span></div>
                                <div class="stat"><span class="l">–í–∏–∑—É–∞–ª</span><div class="b"><div id="bar-visual" style="width:50%"></div></div><span class="v" id="out-visual">5</span></div>
                                <div class="stat"><span class="l">–ó–≤—É–∫</span><div class="b"><div id="bar-sound" style="width:50%"></div></div><span class="v" id="out-sound">5</span></div>
                            </div>

                            <div class="vibe-block">
                                <span class="vt">–í–ê–ô–ë (x<span id="out-bonus">1.0</span>)</span>
                                <span class="vv" id="out-vibe">5/10</span>
                            </div>
                        </div>
                    </div>

                    <div class="mid-part">
                        <p id="out-comment">¬´–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...¬ª</p>
                    </div>

                    <div class="bot-part">
                        <div class="brand">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –∫–∞—Ä—Ç–æ—á–∫—É –≤ –¢–µ–ª–µ–≥—Ä–∞–º ‚Äì @cassette_news</div>
                        
                        <div class="footer r-5" id="footer-el">
                            <div class="f-left">
                                <div class="fl-label">–ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê</div>
                                <div class="fl-rank" id="out-rank">–°–†–ï–î–ù–ï</div>
                            </div>
                            <div class="f-score" id="out-final">5.00</div>
                        </div>
                    </div>
                </div>
            </div> 

        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    
    // === –î–ï–¢–ï–ö–¢–û–† iOS ===
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    
    if (isIOS) {
        document.body.classList.add('is-ios');
    }

    // –≠–ª–µ–º–µ–Ω—Ç—ã
    const els = {
        title: document.getElementById('inp-title'),
        comment: document.getElementById('inp-comment'),
        imgInp: document.getElementById('inp-img'),
        
        plot: document.getElementById('rng-plot'),
        chars: document.getElementById('rng-chars'),
        visual: document.getElementById('rng-visual'),
        sound: document.getElementById('rng-sound'),
        vibe: document.getElementById('rng-vibe'),
        btn: document.getElementById('btn-save'),

        outTitle: document.getElementById('out-title'),
        outComment: document.getElementById('out-comment'),
        
        // –í–ù–ò–ú–ê–ù–ò–ï: DIV-—ã –≤–º–µ—Å—Ç–æ IMG
        cardPosterDiv: document.getElementById('card-poster-div'), 
        bgDiv: document.getElementById('bg-div'), 
        
        barPlot: document.getElementById('bar-plot'), outPlot: document.getElementById('out-plot'),
        barChars: document.getElementById('bar-chars'), outChars: document.getElementById('out-chars'),
        barVisual: document.getElementById('bar-visual'), outVisual: document.getElementById('out-visual'),
        barSound: document.getElementById('bar-sound'), outSound: document.getElementById('out-sound'),
        
        outVibe: document.getElementById('out-vibe'),
        outBonus: document.getElementById('out-bonus'),
        
        outFinal: document.getElementById('out-final'),
        outRank: document.getElementById('out-rank'),
        footer: document.getElementById('footer-el'),
        
        valPlot: document.getElementById('val-plot'),
        valChars: document.getElementById('val-chars'),
        valVisual: document.getElementById('val-visual'),
        valSound: document.getElementById('val-sound'),
        valVibe: document.getElementById('val-vibe'),
        lblVibe: document.getElementById('lbl-vibe'),

        previewContainer: document.getElementById('preview-container'),
        scaleRoot: document.getElementById('card-scale-root')
    };

    const vibeData = {
        1: {m: 0.60, t: "–ù–µ–Ω–∞–≤–∏—Å—Ç—å"}, 2: {m: 0.70, t: "–ü–ª–æ—Ö–æ"},
        3: {m: 0.80, t: "–°–∫—É—á–Ω–æ"}, 4: {m: 0.90, t: "–ù–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
        5: {m: 1.00, t: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ"}, 6: {m: 1.05, t: "–ù–µ–ø–ª–æ—Ö–æ"},
        7: {m: 1.10, t: "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ"}, 8: {m: 1.15, t: "–ö—Ä—É—Ç–æ"},
        9: {m: 1.20, t: "–í–æ—Å—Ç–æ—Ä–≥"}, 10: {m: 1.25, t: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ"}
    };

    const ranks = [
        { l: 1.0, n: "–ú—É—Å–æ—Ä", c: "r-0" }, { l: 2.0, n: "–£–∂–∞—Å–Ω–æ", c: "r-1" },
        { l: 3.0, n: "–ë–µ–∑–Ω–∞–¥–µ–∂–Ω–æ", c: "r-2" }, { l: 4.0, n: "–ü–ª–æ—Ö–æ", c: "r-3" },
        { l: 5.0, n: "–°–ª–∞–±–æ", c: "r-4" }, { l: 6.0, n: "–°—Ä–µ–¥–Ω–µ", c: "r-5" },
        { l: 7.0, n: "–ù–µ–ø–ª–æ—Ö–æ", c: "r-6" }, { l: 8.0, n: "–•–æ—Ä–æ—à–æ", c: "r-7" },
        { l: 9.0, n: "–û—Ç–ª–∏—á–Ω–æ", c: "r-8" }, { l: 9.5, n: "–í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ", c: "r-9" },
        { l: 10.1, n: "–®–µ–¥–µ–≤—Ä", c: "r-10" }
    ];

    function update() {
        const p = parseFloat(els.plot.value);
        const c = parseFloat(els.chars.value);
        const v = parseFloat(els.visual.value);
        const s = parseFloat(els.sound.value);
        const vb = parseInt(els.vibe.value);

        els.valPlot.innerText = p; els.valChars.innerText = c;
        els.valVisual.innerText = v; els.valSound.innerText = s;
        els.valVibe.innerText = vb;
        els.lblVibe.innerText = `${vibeData[vb].t} (x${vibeData[vb].m})`;

        els.outTitle.innerText = els.title.value || "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞";
        
        const txt = els.comment.value.trim();
        els.outComment.innerText = txt ? `¬´${txt}¬ª` : "¬´–ö–æ—Ä–æ—Ç–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...¬ª";
        els.outComment.style.opacity = txt ? "1" : "0.5";

        els.outPlot.innerText = p; els.barPlot.style.width = (p*10)+"%";
        els.outChars.innerText = c; els.barChars.style.width = (c*10)+"%";
        els.outVisual.innerText = v; els.barVisual.style.width = (v*10)+"%";
        els.outSound.innerText = s; els.barSound.style.width = (s*10)+"%";

        els.outVibe.innerText = `${vb}/10`;
        els.outBonus.innerText = vibeData[vb].m;

        let base = (p*0.35) + (c*0.25) + (v*0.25) + (s*0.15);
        let final = (base * 0.8) * vibeData[vb].m;
        if(final>10) final=10; if(final<0) final=0;

        els.outFinal.innerText = final.toFixed(2).replace('.00','');

        let rObj = ranks[0];
        for(let r of ranks) { if(final < r.l) { rObj = r; break; } }
        els.outRank.innerText = rObj.n;
        els.footer.className = `footer ${rObj.c}`;
    }

    // --- –ó–ê–ì–†–£–ó–ö–ê –§–û–¢–û (–ü–†–û–°–¢–û background-image) ---
    els.imgInp.addEventListener('change', (e) => {
        if(e.target.files[0]) {
            const file = e.target.files[0];
            const reader = new FileReader();

            reader.onload = (event) => {
                const rawSrc = event.target.result;
                // –°—Ç–∞–≤–∏–º –∫–∞—Ä—Ç–∏–Ω–∫—É –∫–∞–∫ —Ñ–æ–Ω. 
                // CSS (background-size: cover) —Å–∞–º –æ–±—Ä–µ–∂–µ—Ç –ª–∏—à–Ω–µ–µ –∏ –Ω–µ –±—É–¥–µ—Ç —Å–ø–ª—é—â–∏–≤–∞—Ç—å!
                els.cardPosterDiv.style.backgroundImage = `url('${rawSrc}')`;
                els.bgDiv.style.backgroundImage = `url('${rawSrc}')`;
            }
            reader.readAsDataURL(file);
        }
    });

    function autoScalePreview() {
        const containerW = els.previewContainer.clientWidth;
        const cardW = 1080; 
        const padding = 20; 
        
        let scale = (containerW - padding) / cardW;
        if(scale > 0.55) scale = 0.55;
        els.scaleRoot.style.transform = `scale(${scale})`;
    }
    
    window.addEventListener('resize', autoScalePreview);
    autoScalePreview(); 

    els.btn.addEventListener('click', () => {
        const btn = els.btn;
        const oldText = btn.innerText;
        btn.innerText = "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...";

        const ghost = document.createElement('div');
        ghost.style.position = 'fixed';
        ghost.style.left = '-9999px'; 
        ghost.style.top = '0';
        document.body.appendChild(ghost);

        const clone = document.getElementById('target-card').cloneNode(true);
        clone.style.transform = 'none'; 
        clone.style.width = '1080px';
        clone.style.height = '1080px';
        
        ghost.appendChild(clone);

        setTimeout(() => {
            html2canvas(clone, {
                scale: 1, 
                useCORS: true,
                backgroundColor: "#000"
            }).then(canvas => {
                const link = document.createElement('a');
                const name = (els.title.value || "review").replace(/[^a-z–∞-—è0-9]/gi,'_');
                link.download = `CN_${name}_Card.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();

                document.body.removeChild(ghost);
                btn.innerText = oldText;
            });
        }, 200);
    });

    [els.title, els.comment, els.plot, els.chars, els.visual, els.sound, els.vibe]
        .forEach(el => el.addEventListener('input', update));

    update();
});
</script>
</body>
</html>